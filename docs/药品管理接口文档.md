# 药品管理接口文档

本文档详细介绍了药品管理模块的所有接口，包括药品信息管理、药品分类管理和药品分类关联管理三个部分。

## 1. 药品信息管理接口

### 1.1 分页查询药品信息

**接口地址**：`POST /medicines/page`

**接口功能**：根据条件分页查询药品信息

**请求参数（请求体 JSON）**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| pageNum | int | 是 | 页码（从1开始） | 1 |
| pageSize | int | 是 | 每页条数 | 10 |
| query | object | 否 | 查询条件对象 | - |
| └─ name | string | 否 | 药品名称（模糊查询） | "感冒" |
| └─ isPrescription | int | 否 | 是否处方药（0-非处方药，1-处方药） | 0 |
| └─ status | int | 否 | 状态（0-隐藏，1-显示） | 1 |
| └─ categoryId | long | 否 | 分类ID（通过关联表查询属于该分类的药品） | 3001 |

**请求示例**：
```json
{
  "pageNum": 1,
  "pageSize": 10,
  "query": {
    "name": "感冒",
    "categoryId": 3001
  }
}
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | object | 响应数据 | - |
| └─ pageNum | int | 当前页码 | 1 |
| └─ pageSize | int | 每页条数 | 10 |
| └─ total | long | 总记录数 | 100 |
| └─ list | array | 药品列表 | - |

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "pageNum": 1,
    "pageSize": 10,
    "total": 100,
    "list": [
      {
        "id": 50001,
        "name": "八珍颗粒",
        "commonName": "八珍颗粒",
        "brandName": null,
        "description": "补气养血，面色萎黄、食欲不振",
        "coverImageUrl": "https://picsum.photos/seed/50001/360/240",
        "images": "[\"https://picsum.photos/seed/50001a/800/600\", \"https://picsum.photos/seed/50001b/800/600\"]",
        "specs": "[\"10包/盒\", \"15包/盒\"]",
        "tags": "[\"补气\", \"养血\"]",
        "recommendationLevel": "经典方剂",
        "isPrescription": 0,
        "price": 45.00,
        "originalPrice": 52.00,
        "sales": 1200,
        "rating": 98.50,
        "indications": "用于气血两虚所致的面色萎黄、头晕心悸、食欲不振。",
        "functions": "补气养血，健脾安神。",
        "dosage": "口服，一次1包，一日2次。",
        "adverseReactions": "偶见胃部不适、轻微皮疹。",
        "contraindications": "对成分过敏者禁用。",
        "precautions": "孕妇及哺乳期慎用，遵医嘱。",
        "status": 1,
        "isDeleted": 0,
        "createdAt": "2025-12-24 08:42:30",
        "updatedAt": "2025-12-24 08:42:30"
      }
    ]
  }
}
```

### 1.2 根据ID查询药品

**接口地址**：`GET /medicines/{id}`

**接口功能**：根据ID查询单个药品信息

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | long | 是 | 药品ID | 50001 |

**请求示例**：
```
GET /medicines/50001
```

**响应参数**：同分页查询的单个药品对象

### 1.3 新增药品

**接口地址**：`POST /medicines/create`

**接口功能**：新增药品信息

**请求参数（请求体 JSON）**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| name | string | 是 | 药品名称 | "新药品" |
| commonName | string | 否 | 通用名称 | "通用名称" |
| brandName | string | 否 | 品牌/商品名 | "品牌名" |
| description | string | 否 | 简介摘要 | "药品简介" |
| coverImageUrl | string | 否 | 封面图片URL | "https://..." |
| images | string | 否 | 图片列表JSON数组 | "[\"url1\",\"url2\"]" |
| specs | string | 否 | 规格列表JSON数组 | "[\"10包/盒\"]" |
| tags | string | 否 | 标签JSON数组 | "[\"感冒\",\"发热\"]" |
| recommendationLevel | string | 否 | 推荐级别文案 | "推荐" |
| isPrescription | int | 否 | 是否处方药（0-非处方药，1-处方药） | 0 |
| price | decimal | 是 | 现价 | 25.50 |
| originalPrice | decimal | 否 | 原价 | 30.00 |
| sales | int | 否 | 月销量 | 0 |
| rating | decimal | 否 | 好评率 | 95.00 |
| indications | string | 否 | 适应症 | "适应症描述" |
| functions | string | 否 | 功能主治 | "功能主治描述" |
| dosage | string | 否 | 用法用量 | "用法用量描述" |
| adverseReactions | string | 否 | 不良反应 | "不良反应描述" |
| contraindications | string | 否 | 禁忌 | "禁忌描述" |
| precautions | string | 否 | 注意事项 | "注意事项描述" |
| status | int | 否 | 状态（0-隐藏，1-显示） | 1 |

**请求示例**：
```json
{
  "name": "新药品",
  "price": 25.50,
  "description": "新上架的药品",
  "isPrescription": 0,
  "status": 1
}
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | long | 新增药品的ID | 50051 |

### 1.4 更新药品

**接口地址**：`PUT /medicines/update`

**接口功能**：更新药品信息

**请求参数（请求体 JSON）**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | long | 是 | 药品ID | 50001 |
| name | string | 是 | 药品名称 | "修改后药品" |
| commonName | string | 否 | 通用名称 | "通用名称" |
| brandName | string | 否 | 品牌/商品名 | "品牌名" |
| description | string | 否 | 简介摘要 | "药品简介" |
| coverImageUrl | string | 否 | 封面图片URL | "https://..." |
| images | string | 否 | 图片列表JSON数组 | "[\"url1\",\"url2\"]" |
| specs | string | 否 | 规格列表JSON数组 | "[\"10包/盒\"]" |
| tags | string | 否 | 标签JSON数组 | "[\"感冒\",\"发热\"]" |
| recommendationLevel | string | 否 | 推荐级别文案 | "推荐" |
| isPrescription | int | 否 | 是否处方药（0-非处方药，1-处方药） | 0 |
| price | decimal | 是 | 现价 | 25.50 |
| originalPrice | decimal | 否 | 原价 | 30.00 |
| sales | int | 否 | 月销量 | 0 |
| rating | decimal | 否 | 好评率 | 95.00 |
| indications | string | 否 | 适应症 | "适应症描述" |
| functions | string | 否 | 功能主治 | "功能主治描述" |
| dosage | string | 否 | 用法用量 | "用法用量描述" |
| adverseReactions | string | 否 | 不良反应 | "不良反应描述" |
| contraindications | string | 否 | 禁忌 | "禁忌描述" |
| precautions | string | 否 | 注意事项 | "注意事项描述" |
| status | int | 否 | 状态（0-隐藏，1-显示） | 1 |

**请求示例**：
```json
{
  "id": 50001,
  "name": "修改后药品",
  "price": 28.00,
  "description": "修改后的药品描述"
}
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | boolean | 是否修改成功 | true |

### 1.5 删除药品

**接口地址**：`DELETE /medicines/delete/{id}`

**接口功能**：根据ID删除药品（逻辑删除）

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | long | 是 | 药品ID | 50001 |

**请求示例**：
```
DELETE /medicines/delete/50001
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | boolean | 是否删除成功 | true |

---

## 2. 药品分类管理接口

### 2.1 分页查询药品分类

**接口地址**：`POST /medicine-categories/page`

**接口功能**：根据条件分页查询药品分类

**请求参数（请求体 JSON）**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| pageNum | int | 是 | 页码（从1开始） | 1 |
| pageSize | int | 是 | 每页条数 | 10 |
| query | object | 否 | 查询条件对象 | - |
| └─ parentId | long | 否 | 父分类ID（null为一级分类） | null |
| └─ name | string | 否 | 分类名称（模糊查询） | "感冒" |
| └─ isEnabled | int | 否 | 是否启用（0-否，1-是） | 1 |

**请求示例**：
```json
{
  "pageNum": 1,
  "pageSize": 10,
  "query": {
    "name": "感冒"
  }
}
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | object | 响应数据 | - |
| └─ pageNum | int | 当前页码 | 1 |
| └─ pageSize | int | 每页条数 | 10 |
| └─ total | long | 总记录数 | 50 |
| └─ list | array | 分类列表 | - |

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "pageNum": 1,
    "pageSize": 10,
    "total": 50,
    "list": [
      {
        "id": 3001,
        "parentId": null,
        "name": "中药调理",
        "description": "传统中医药调理类",
        "sortOrder": 1,
        "isEnabled": 1,
        "createdAt": "2025-12-24 08:42:30",
        "updatedAt": "2025-12-24 08:42:30"
      }
    ]
  }
}
```

### 2.2 根据ID查询药品分类

**接口地址**：`GET /medicine-categories/{id}`

**接口功能**：根据ID查询单个药品分类

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | long | 是 | 分类ID | 3001 |

**请求示例**：
```
GET /medicine-categories/3001
```

**响应参数**：同分页查询的单个分类对象

### 2.3 新增药品分类

**接口地址**：`POST /medicine-categories/create`

**接口功能**：新增药品分类

**请求参数（请求体 JSON）**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| parentId | long | 否 | 父分类ID（null为一级分类） | null |
| name | string | 是 | 分类名称 | "新分类" |
| description | string | 否 | 分类描述 | "分类描述" |
| sortOrder | int | 否 | 排序 | 1 |
| isEnabled | int | 否 | 是否启用（0-否，1-是） | 1 |

**请求示例**：
```json
{
  "name": "新分类",
  "description": "新药品分类",
  "sortOrder": 1,
  "isEnabled": 1
}
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | long | 新增分类的ID | 3050 |

### 2.4 更新药品分类

**接口地址**：`PUT /medicine-categories/update`

**接口功能**：更新药品分类

**请求参数（请求体 JSON）**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | long | 是 | 分类ID | 3001 |
| parentId | long | 否 | 父分类ID（null为一级分类） | null |
| name | string | 是 | 分类名称 | "修改后分类" |
| description | string | 否 | 分类描述 | "分类描述" |
| sortOrder | int | 否 | 排序 | 2 |
| isEnabled | int | 否 | 是否启用（0-否，1-是） | 1 |

**请求示例**：
```json
{
  "id": 3001,
  "name": "修改后分类",
  "description": "修改后的分类描述",
  "sortOrder": 2
}
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | boolean | 是否修改成功 | true |

### 2.5 删除药品分类

**接口地址**：`DELETE /medicine-categories/delete/{id}`

**接口功能**：根据ID删除药品分类

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | long | 是 | 分类ID | 3001 |

**请求示例**：
```
DELETE /medicine-categories/delete/3001
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | boolean | 是否删除成功 | true |

---

## 3. 药品分类关联管理接口

### 3.1 分页查询药品分类关联

**接口地址**：`POST /medicine-category-relations/page`

**接口功能**：根据条件分页查询药品与分类的关联关系

**请求参数（请求体 JSON）**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| pageNum | int | 是 | 页码（从1开始） | 1 |
| pageSize | int | 是 | 每页条数 | 10 |
| query | object | 否 | 查询条件对象 | - |
| └─ medicineId | long | 否 | 药品ID | 50001 |
| └─ categoryId | long | 否 | 分类ID | 3001 |

**请求示例**：
```json
{
  "pageNum": 1,
  "pageSize": 10,
  "query": {
    "medicineId": 50001
  }
}
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | object | 响应数据 | - |
| └─ pageNum | int | 当前页码 | 1 |
| └─ pageSize | int | 每页条数 | 10 |
| └─ total | long | 总记录数 | 200 |
| └─ list | array | 关联列表 | - |

**响应示例**：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "pageNum": 1,
    "pageSize": 10,
    "total": 200,
    "list": [
      {
        "id": 80001,
        "medicineId": 50001,
        "categoryId": 3011,
        "createdAt": "2025-12-24 08:42:30"
      }
    ]
  }
}
```

### 3.2 根据ID查询药品分类关联

**接口地址**：`GET /medicine-category-relations/{id}`

**接口功能**：根据ID查询单个药品分类关联

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | long | 是 | 关联ID | 80001 |

**请求示例**：
```
GET /medicine-category-relations/80001
```

**响应参数**：同分页查询的单个关联对象

### 3.3 新增药品分类关联

**接口地址**：`POST /medicine-category-relations`

**接口功能**：新增药品与分类的关联关系

**请求参数（请求体 JSON）**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| medicineId | long | 是 | 药品ID | 50001 |
| categoryId | long | 是 | 分类ID | 3001 |

**请求示例**：
```json
{
  "medicineId": 50001,
  "categoryId": 3001
}
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | long | 新增关联的ID | 80100 |

### 3.4 修改药品分类关联

**接口地址**：`PUT /medicine-category-relations`

**接口功能**：修改药品分类关联（实际上主要用来更新创建时间等信息）

**请求参数（请求体 JSON）**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | long | 是 | 关联ID | 80001 |
| medicineId | long | 是 | 药品ID | 50002 |
| categoryId | long | 是 | 分类ID | 3002 |

**请求示例**：
```json
{
  "id": 80001,
  "medicineId": 50002,
  "categoryId": 3002
}
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | boolean | 是否修改成功 | true |

### 3.5 删除药品分类关联

**接口地址**：`DELETE /medicine-category-relations/{id}`

**接口功能**：根据ID删除药品分类关联

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | long | 是 | 关联ID | 80001 |

**请求示例**：
```
DELETE /medicine-category-relations/80001
```

**响应参数**：

| 参数名 | 类型 | 说明 | 示例值 |
|--------|------|------|--------|
| code | int | 响应状态码 | 200 |
| message | string | 响应消息 | "操作成功" |
| data | boolean | 是否删除成功 | true |

---

## 通用说明

### 响应状态码

- 200：操作成功
- 400：请求参数错误
- 401：未授权
- 403：禁止访问
- 404：资源不存在
- 500：服务器内部错误

### 日期时间格式

- 所有日期时间字段均使用 `yyyy-MM-dd HH:mm:ss` 格式

### 分页参数说明

- 所有分页接口均使用PageParam<T>泛型结构，包含pageNum和pageSize参数
- pageNum：页码，从1开始
- pageSize：每页条数，建议不超过100
- query：具体的查询条件对象

### 字段说明

- 药品信息表（medicines）和药品分类表（medicine_categories）继承了BaseEntity，包含id、createdAt、updatedAt字段
- 药品分类关联表（medicine_category_relations）只包含createdAt字段，不包含updatedAt字段，因此实体类不继承BaseEntity

### 特殊功能说明

- 药品信息管理支持根据分类ID查询（categoryId参数），通过关联表medicine_category_relations查询属于指定分类的药品